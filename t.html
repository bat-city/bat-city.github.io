<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³Ø§Ù…Ø§Ù†Ù‡ Ø¨Ø§Ù†Ú©ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #34495e;
            --gray: #95a5a6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .page {
            display: none;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            margin: 20px auto;
            min-height: 80vh;
        }
        
        .page.active {
            display: block;
        }
        
        .header {
            background: var(--primary);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .btn-primary { background: var(--secondary); color: white; }
        .btn-success { background: var(--success); color: white; }
        .btn-danger { background: var(--danger); color: white; }
        .btn-warning { background: var(--warning); color: white; }
        .btn-light { background: var(--light); color: var(--dark); }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .form-group {
            margin: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin: 15px;
            padding: 20px;
            border-left: 4px solid var(--secondary);
        }
        
        .card-balance {
            border-left-color: var(--success);
        }
        
        .card-transfer {
            border-left-color: var(--warning);
        }
        
        .card-admin {
            border-left-color: var(--danger);
        }
        
        .card h3 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.4em;
        }
        
        .balance-display {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--success);
            text-align: center;
            margin: 20px 0;
        }
        
        .user-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px;
        }
        
        .user-item {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .user-item h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .note-item {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 3px solid var(--warning);
        }
        
        .note-item .delete-note {
            float: left;
            color: var(--danger);
            cursor: pointer;
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--secondary), #1a56db);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-card h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .stat-card .value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .logout-btn {
            position: absolute;
            left: 20px;
            top: 20px;
        }
        
        .hidden {
            display: none !important;
        }
        
        @media (max-width: 768px) {
            .nav-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
        <div id="login-page" class="page active">
            <div class="header">
                <h1>ğŸ¦ Ø³Ø§Ù…Ø§Ù†Ù‡ Ø¨Ø§Ù†Ú©ÛŒ</h1>
                <p>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</p>
            </div>
            <div class="form-group">
                <label for="username">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ:</label>
                <input type="text" id="username" class="form-control" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
            </div>
            <div class="form-group">
                <label for="password">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±:</label>
                <input type="password" id="password" class="form-control" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
            </div>
            <div class="nav-buttons">
                <button class="btn btn-primary" onclick="login()">ÙˆØ±ÙˆØ¯</button>
                <button class="btn btn-light" onclick="showPage('register-page')">Ø«Ø¨Øª Ù†Ø§Ù…</button>
            </div>
            <div id="login-error" style="color: var(--danger); text-align: center; margin: 15px; font-weight: bold;"></div>
        </div>

        <!-- ØµÙØ­Ù‡ Ø«Ø¨Øª Ù†Ø§Ù… -->
        <div id="register-page" class="page">
            <div class="header">
                <h1>ğŸ“ Ø«Ø¨Øª Ù†Ø§Ù… Ø¬Ø¯ÛŒØ¯</h1>
                <p>Ø§ÛŒØ¬Ø§Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</p>
            </div>
            <div class="form-group">
                <label for="reg-username">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ:</label>
                <input type="text" id="reg-username" class="form-control" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
            </div>
            <div class="form-group">
                <label for="reg-password">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±:</label>
                <input type="password" id="reg-password" class="form-control" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
            </div>
            <div class="form-group">
                <label for="reg-fullname">Ù†Ø§Ù… Ú©Ø§Ù…Ù„:</label>
                <input type="text" id="reg-fullname" class="form-control" placeholder="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ">
            </div>
            <div class="form-group">
                <label for="reg-phone">Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:</label>
                <input type="tel" id="reg-phone" class="form-control" placeholder="09123456789">
            </div>
            <div class="nav-buttons">
                <button class="btn btn-success" onclick="register()">Ø«Ø¨Øª Ù†Ø§Ù…</button>
                <button class="btn btn-light" onclick="showPage('login-page')">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙˆØ±ÙˆØ¯</button>
            </div>
            <div id="register-error" style="color: var(--danger); text-align: center; margin: 15px; font-weight: bold;"></div>
        </div>

        <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú©Ø§Ø±Ø¨Ø± Ù…Ø¹Ù…ÙˆÙ„ÛŒ -->
        <div id="user-dashboard" class="page">
            <div class="header">
                <button class="btn btn-danger logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                <h1>ğŸ  Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú©Ø§Ø±Ø¨Ø±</h1>
                <p id="user-welcome">Ø®ÙˆØ´Ø­Ø§Ù„Ù… Ú©Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù‡Ø³ØªÙ…!</p>
            </div>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <h3>Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ù„</h3>
                    <div class="value" id="total-balance">0</div>
                    <div>ØªÙˆÙ…Ø§Ù†</div>
                </div>
                <div class="stat-card">
                    <h3>Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„</h3>
                    <div class="value" id="active-cards">0</div>
                    <div>Ø¹Ø¯Ø¯</div>
                </div>
                <div class="stat-card">
                    <h3>ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§</h3>
                    <div class="value" id="note-count">0</div>
                    <div>Ø¹Ø¯Ø¯</div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-primary" onclick="showPage('cards-page')">Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù†</button>
                <button class="btn btn-success" onclick="showPage('transfer-page')">Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ¬Ù‡</button>
                <button class="btn btn-warning" onclick="showPage('salary-page')">Ø¯Ø±ÛŒØ§ÙØª Ø­Ù‚ÙˆÙ‚</button>
                <button class="btn btn-light" onclick="showPage('notes-page')">ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§</button>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ -->
        <div id="cards-page" class="page">
            <div class="header">
                <button class="btn btn-danger logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                <h1>ğŸ’³ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù†Ú©ÛŒ</h1>
                <p>Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§</p>
            </div>
            <div id="cards-container">
                <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>
            <div style="text-align: center; margin: 20px;">
                <button class="btn btn-primary" onclick="showPage('user-dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</button>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ¬Ù‡ -->
        <div id="transfer-page" class="page">
            <div class="header">
                <button class="btn btn-danger logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                <h1>ğŸ”„ Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ¬Ù‡</h1>
                <p>Ú©Ø§Ø±Øª Ø¨Ù‡ Ú©Ø§Ø±Øª</p>
            </div>
            <div class="form-group">
                <label for="from-card">Ú©Ø§Ø±Øª Ù…Ø¨Ø¯Ø£:</label>
                <select id="from-card" class="form-control"></select>
            </div>
            <div class="form-group">
                <label for="to-card">Ú©Ø§Ø±Øª Ù…Ù‚ØµØ¯:</label>
                <select id="to-card" class="form-control"></select>
            </div>
            <div class="form-group">
                <label for="transfer-amount">Ù…Ø¨Ù„Øº Ø§Ù†ØªÙ‚Ø§Ù„:</label>
                <input type="number" id="transfer-amount" class="form-control" placeholder="Ù…Ø¨Ù„Øº Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
            </div>
            <div class="form-group">
                <label for="transfer-desc">ØªÙˆØ¶ÛŒØ­Ø§Øª:</label>
                <input type="text" id="transfer-desc" class="form-control" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ù†ØªÙ‚Ø§Ù„">
            </div>
            <div class="nav-buttons">
                <button class="btn btn-success" onclick="transferMoney()">Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ¬Ù‡</button>
                <button class="btn btn-light" onclick="showPage('user-dashboard')">Ø§Ù†ØµØ±Ø§Ù</button>
            </div>
            <div id="transfer-result" style="text-align: center; margin: 15px; font-weight: bold;"></div>
        </div>

        <!-- ØµÙØ­Ù‡ Ø­Ù‚ÙˆÙ‚ -->
        <div id="salary-page" class="page">
            <div class="header">
                <button class="btn btn-danger logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                <h1>ğŸ’° Ø¯Ø±ÛŒØ§ÙØª Ø­Ù‚ÙˆÙ‚</h1>
                <p>Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ù‚ÙˆÙ‚ Ø´Ù…Ø§</p>
            </div>
            <div class="card">
                <h3>ÙˆØ¶Ø¹ÛŒØª Ø­Ù‚ÙˆÙ‚ ÙØ¹Ù„ÛŒ</h3>
                <div style="margin: 20px 0;">
                    <p><strong>Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù‡Ø§Ù†Ù‡:</strong> <span id="monthly-salary">0</span> ØªÙˆÙ…Ø§Ù†</p>
                    <p><strong>Ø­Ù‚ÙˆÙ‚ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯Ù‡:</strong> <span id="received-salary">0</span> ØªÙˆÙ…Ø§Ù†</p>
                    <p><strong>Ø­Ù‚ÙˆÙ‚ Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡:</strong> <span id="remaining-salary">0</span> ØªÙˆÙ…Ø§Ù†</p>
                </div>
                <button class="btn btn-success" onclick="receiveSalary()">Ø¯Ø±ÛŒØ§ÙØª Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù‡ Ø¬Ø§Ø±ÛŒ</button>
            </div>
            <div style="text-align: center; margin: 20px;">
                <button class="btn btn-primary" onclick="showPage('user-dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</button>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ -->
        <div id="notes-page" class="page">
            <div class="header">
                <button class="btn btn-danger logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                <h1>ğŸ“ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§</h1>
                <p>Ù…Ø¯ÛŒØ±ÛŒØª ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ø®ØµÛŒ</p>
            </div>
            <div class="form-group">
                <label for="new-note">ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø¬Ø¯ÛŒØ¯:</label>
                <textarea id="new-note" class="form-control" rows="4" placeholder="Ù…ØªÙ† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..."></textarea>
            </div>
            <div style="text-align: center; margin: 10px;">
                <button class="btn btn-primary" onclick="addNote()">Ø§ÙØ²ÙˆØ¯Ù† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</button>
            </div>
            <div id="notes-container">
                <!-- ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>
            <div style="text-align: center; margin: 20px;">
                <button class="btn btn-light" onclick="showPage('user-dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
            </div>
        </div>

        <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¯Ù…ÛŒÙ† -->
        <div id="admin-dashboard" class="page">
            <div class="header">
                <button class="btn btn-danger logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                <h1>ğŸ‘‘ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¯Ù…ÛŒÙ†</h1>
                <p>Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ…</p>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-warning" onclick="showPage('admin-users')">Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</button>
                <button class="btn btn-danger" onclick="showPage('admin-managers')">Ù…Ø¯ÛŒØ±Ø§Ù†</button>
                <button class="btn btn-success" onclick="showPage('admin-cards')">Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§</button>
                <button class="btn btn-primary" onclick="showPage('admin-salaries')">Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ù‚ÙˆÙ‚</button>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§Ø¯Ù…ÛŒÙ† -->
        <div id="admin-users" class="page">
            <div class="header">
                <button class="btn btn-danger logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                <h1>ğŸ‘¥ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h1>
                <p>Ù„ÛŒØ³Øª ØªÙ…Ø§Ù… Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø³ÛŒØ³ØªÙ…</p>
            </div>
            <div class="form-group">
                <label for="search-user">Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±:</label>
                <input type="text" id="search-user" class="form-control" onkeyup="searchUsers()" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø±Ø§ Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒØ¯">
            </div>
            <div id="users-container" class="user-list">
                <!-- Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>
            <div style="text-align: center; margin: 20px;">
                <button class="btn btn-light" onclick="showPage('admin-dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</button>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ Ù…Ø¯ÛŒØ±Ø§Ù† Ø§Ø¯Ù…ÛŒÙ† -->
        <div id="admin-managers" class="page">
            <div class="header">
                <button class="btn btn-danger logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                <h1>ğŸ‘¨â€ğŸ’¼ Ù…Ø¯ÛŒØ±Ø§Ù† Ø³ÛŒØ³ØªÙ…</h1>
                <p>Ø§ÙØ²ÙˆØ¯Ù† Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø¯ÛŒØ±Ø§Ù†</p>
            </div>
            <div class="form-group">
                <label for="manager-username">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù…Ø¯ÛŒØ±:</label>
                <input type="text" id="manager-username" class="form-control" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù…Ø¯ÛŒØ±">
            </div>
            <div class="form-group">
                <label for="manager-password">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±:</label>
                <input type="password" id="manager-password" class="form-control" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù…Ø¯ÛŒØ±">
            </div>
            <div class="form-group">
                <label for="manager-fullname">Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ù…Ø¯ÛŒØ±:</label>
                <input type="text" id="manager-fullname" class="form-control" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ù…Ø¯ÛŒØ±">
            </div>
            <div style="text-align: center; margin: 15px;">
                <button class="btn btn-primary" onclick="addManager()">Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø¯ÛŒØ± Ø¬Ø¯ÛŒØ¯</button>
            </div>
            <div id="managers-list">
                <!-- Ù„ÛŒØ³Øª Ù…Ø¯ÛŒØ±Ø§Ù† Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
            </div>
            <div style="text-align: center; margin: 20px;">
                <button class="btn btn-light" onclick="showPage('admin-dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ† -->
        <div id="admin-cards" class="page">
            <div class="header">
                <button class="btn btn-danger logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                <h1>ğŸ’³ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§</h1>
                <p>Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ùˆ ÙˆÛŒØ±Ø§ÛŒØ´ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§</p>
            </div>
            <div class="form-group">
                <label for="admin-card-select">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ø±Øª:</label>
                <select id="admin-card-select" class="form-control" onchange="loadCardDetails()"></select>
            </div>
            <div id="card-details" class="card card-admin">
                <h3>Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ø±Øª</h3>
                <div id="card-info">
                    <!-- Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ø±Øª Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                </div>
                <div class="form-group">
                    <label for="balance-change">ØªØºÛŒÛŒØ± Ù…ÙˆØ¬ÙˆØ¯ÛŒ:</label>
                    <input type="number" id="balance-change" class="form-control" placeholder="Ù…Ø¨Ù„Øº Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ø¨Øª ÛŒØ§ Ù…Ù†ÙÛŒ)">
                </div>
                <div style="text-align: center; margin: 15px;">
                    <button class="btn btn-success" onclick="updateBalance()">Ø§Ø¹Ù…Ø§Ù„ ØªØºÛŒÛŒØ±Ø§Øª</button>
                </div>
            </div>
            <div style="text-align: center; margin: 20px;">
                <button class="btn btn-light" onclick="showPage('admin-dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ù‚ÙˆÙ‚ Ø§Ø¯Ù…ÛŒÙ† -->
        <div id="admin-salaries" class="page">
            <div class="header">
                <button class="btn btn-danger logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
                <h1>ğŸ’° Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ù‚ÙˆÙ‚</h1>
                <p>ØªØ¹ÛŒÛŒÙ† Ø­Ù‚ÙˆÙ‚ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</p>
            </div>
            <div class="form-group">
                <label for="salary-user">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±:</label>
                <select id="salary-user" class="form-control"></select>
            </div>
            <div class="form-group">
                <label for="monthly-salary-amount">Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù‡Ø§Ù†Ù‡:</label>
                <input type="number" id="monthly-salary-amount" class="form-control" placeholder="Ù…Ø¨Ù„Øº Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù‡Ø§Ù†Ù‡">
            </div>
            <div style="text-align: center; margin: 15px;">
                <button class="btn btn-primary" onclick="setUserSalary()">Ø«Ø¨Øª Ø­Ù‚ÙˆÙ‚</button>
            </div>
            <div id="salaries-list">
                <!-- Ù„ÛŒØ³Øª Ø­Ù‚ÙˆÙ‚ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
            </div>
            <div style="text-align: center; margin: 20px;">
                <button class="btn btn-light" onclick="showPage('admin-dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
            </div>
        </div>
    </div>

    <script>
        // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ
        let currentUser = null;
        let users = [];
        let cards = [];
        let notes = [];
        let salaries = {};

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡
        function showPage(pageId) {
            // Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… ØµÙØ­Ø§Øª
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
            document.getElementById(pageId).classList.add('active');
            
            // Ø§Ú¯Ø± ØµÙØ­Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú©Ø§Ø±Ø¨Ø± Ø§Ø³ØªØŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†
            if (pageId === 'user-dashboard' && currentUser) {
                loadDashboardData();
            }
            // Ø§Ú¯Ø± ØµÙØ­Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§Ø³ØªØŒ Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø±Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†
            if (pageId === 'admin-users') {
                loadUsersList();
            }
            // Ø§Ú¯Ø± ØµÙØ­Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ Ø§Ø³ØªØŒ Ù„ÛŒØ³Øª ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†
            if (pageId === 'notes-page') {
                loadNotes();
            }
            // Ø§Ú¯Ø± ØµÙØ­Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ø§Ø³ØªØŒ Ù„ÛŒØ³Øª Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†
            if (pageId === 'admin-cards') {
                loadAdminCards();
            }
            // Ø§Ú¯Ø± ØµÙØ­Ù‡ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø§Ø³ØªØŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†
            if (pageId === 'cards-page' && currentUser) {
                loadUserCards();
            }
            // Ø§Ú¯Ø± ØµÙØ­Ù‡ Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ¬Ù‡ Ø§Ø³ØªØŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†
            if (pageId === 'transfer-page' && currentUser) {
                loadTransferCards();
            }
            // Ø§Ú¯Ø± ØµÙØ­Ù‡ Ù…Ø¯ÛŒØ±Ø§Ù† Ø§Ø³ØªØŒ Ù„ÛŒØ³Øª Ù…Ø¯ÛŒØ±Ø§Ù† Ø±Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†
            if (pageId === 'admin-managers') {
                loadManagersList();
            }
            // Ø§Ú¯Ø± ØµÙØ­Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ù‚ÙˆÙ‚ Ø§Ø³ØªØŒ Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø±Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†
            if (pageId === 'admin-salaries') {
                loadSalaryUsers();
            }
        }

        // ØªØ§Ø¨Ø¹ ÙˆØ±ÙˆØ¯
        function login() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            const errorElement = document.getElementById('login-error');
            
            if (!username || !password) {
                errorElement.textContent = 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯!';
                return;
            }
            
            loadFromStorage();
            
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                errorElement.textContent = '';
                
                // Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø±
                if (user.role === 'admin') {
                    showPage('admin-dashboard');
                } else if (user.role === 'manager') {
                    showPage('admin-dashboard'); // Ù…Ø¯ÛŒØ±Ø§Ù† Ù‡Ù… Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¯Ù…ÛŒÙ† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ù†Ø¯
                } else {
                    showPage('user-dashboard');
                }
                
                // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾ÛŒØ§Ù… Ø®ÙˆØ´Ø§Ù…Ø¯
                document.getElementById('user-welcome').textContent = `Ø®ÙˆØ´Ø­Ø§Ù„Ù… Ú©Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù‡Ø³ØªÙ…ØŒ ${user.fullname}!`;
            } else {
                errorElement.textContent = 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!';
            }
        }

        // ØªØ§Ø¨Ø¹ Ø«Ø¨Øª Ù†Ø§Ù…
        function register() {
            const username = document.getElementById('reg-username').value.trim();
            const password = document.getElementById('reg-password').value.trim();
            const fullname = document.getElementById('reg-fullname').value.trim();
            const phone = document.getElementById('reg-phone').value.trim();
            const errorElement = document.getElementById('register-error');
            
            if (!username || !password || !fullname || !phone) {
                errorElement.textContent = 'ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯!';
                return;
            }
            
            if (username.length < 3) {
                errorElement.textContent = 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ 3 Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø§Ø´Ø¯!';
                return;
            }
            
            if (password.length < 6) {
                errorElement.textContent = 'Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ 6 Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø§Ø´Ø¯!';
                return;
            }
            
            if (!/^\d{11}$/.test(phone)) {
                errorElement.textContent = 'Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ø¨Ø§ÛŒØ¯ 11 Ø±Ù‚Ù…ÛŒ Ø¨Ø§Ø´Ø¯!';
                return;
            }
            
            loadFromStorage();
            
            // Ø¨Ø±Ø±Ø³ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ø¨ÙˆØ¯Ù† Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ
            if (users.some(u => u.username === username)) {
                errorElement.textContent = 'Ø§ÛŒÙ† Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª!';
                return;
            }
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
            const newUser = {
                id: Date.now(),
                username: username,
                password: password,
                fullname: fullname,
                phone: phone,
                role: 'user',
                createdAt: new Date().toISOString()
            };
            
            users.push(newUser);
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
            createDefaultCard(newUser.id);
            
            saveToStorage();
            
            errorElement.textContent = 'Ø«Ø¨Øª Ù†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯! Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯.';
            document.getElementById('reg-username').value = '';
            document.getElementById('reg-password').value = '';
            document.getElementById('reg-fullname').value = '';
            document.getElementById('reg-phone').value = '';
        }

        // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶
        function createDefaultCard(userId) {
            const cardNumber = '****-****-****-' + Math.floor(1000 + Math.random() * 9000);
            const newCard = {
                id: Date.now(),
                userId: userId,
                cardNumber: cardNumber,
                balance: 1000000, // Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ 1 Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†
                cardName: 'Ú©Ø§Ø±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶',
                isActive: true,
                createdAt: new Date().toISOString()
            };
            
            cards.push(newCard);
            saveToStorage();
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² localStorage
        function loadFromStorage() {
            if (localStorage.getItem('bankUsers')) {
                users = JSON.parse(localStorage.getItem('bankUsers'));
            }
            if (localStorage.getItem('bankCards')) {
                cards = JSON.parse(localStorage.getItem('bankCards'));
            }
            if (localStorage.getItem('bankNotes')) {
                notes = JSON.parse(localStorage.getItem('bankNotes'));
            }
            if (localStorage.getItem('bankSalaries')) {
                salaries = JSON.parse(localStorage.getItem('bankSalaries')) || {};
            }
        }

        // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¯Ø± localStorage
        function saveToStorage() {
            localStorage.setItem('bankUsers', JSON.stringify(users));
            localStorage.setItem('bankCards', JSON.stringify(cards));
            localStorage.setItem('bankNotes', JSON.stringify(notes));
            localStorage.setItem('bankSalaries', JSON.stringify(salaries));
        }

        // ØªØ§Ø¨Ø¹ Ø®Ø±ÙˆØ¬
        function logout() {
            currentUser = null;
            showPage('login-page');
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
        function loadDashboardData() {
            if (!currentUser) return;
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ù„
            const userCards = cards.filter(c => c.userId === currentUser.id && c.isActive);
            const totalBalance = userCards.reduce((sum, card) => sum + card.balance, 0);
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±
            document.getElementById('total-balance').textContent = totalBalance.toLocaleString('fa-IR');
            document.getElementById('active-cards').textContent = userCards.length;
            
            // ØªØ¹Ø¯Ø§Ø¯ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§
            const userNotes = notes.filter(n => n.userId === currentUser.id);
            document.getElementById('note-count').textContent = userNotes.length;
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
        function loadUserCards() {
            if (!currentUser) return;
            
            const userCards = cards.filter(c => c.userId === currentUser.id);
            const container = document.getElementById('cards-container');
            container.innerHTML = '';
            
            if (userCards.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--gray);">Ø´Ù…Ø§ Ù‡ÛŒÚ† Ú©Ø§Ø±ØªÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯!</div>';
                return;
            }
            
            userCards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card card-balance';
                cardElement.innerHTML = `
                    <h3>${card.cardName}</h3>
                    <p><strong>Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª:</strong> ${card.cardNumber}</p>
                    <p><strong>Ù…ÙˆØ¬ÙˆØ¯ÛŒ:</strong> ${card.balance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                    <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> ${card.isActive ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ±ÙØ¹Ø§Ù„'}</p>
                    <p><strong>ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯:</strong> ${new Date(card.createdAt).toLocaleDateString('fa-IR')}</p>
                `;
                container.appendChild(cardElement);
            });
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ¬Ù‡
        function loadTransferCards() {
            if (!currentUser) return;
            
            const fromSelect = document.getElementById('from-card');
            const toSelect = document.getElementById('to-card');
            
            fromSelect.innerHTML = '';
            toSelect.innerHTML = '';
            
            const userCards = cards.filter(c => c.userId === currentUser.id && c.isActive);
            
            userCards.forEach(card => {
                const optionFrom = document.createElement('option');
                optionFrom.value = card.id;
                optionFrom.textContent = `${card.cardName} (${card.cardNumber}) - ${card.balance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†`;
                
                const optionTo = document.createElement('option');
                optionTo.value = card.id;
                optionTo.textContent = `${card.cardName} (${card.cardNumber})`;
                
                fromSelect.appendChild(optionFrom);
                toSelect.appendChild(optionTo);
            });
        }

        // Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ¬Ù‡
        function transferMoney() {
            if (!currentUser) return;
            
            const fromCardId = parseInt(document.getElementById('from-card').value);
            const toCardId = parseInt(document.getElementById('to-card').value);
            const amount = parseInt(document.getElementById('transfer-amount').value);
            const description = document.getElementById('transfer-desc').value.trim();
            
            const resultElement = document.getElementById('transfer-result');
            
            if (fromCardId === toCardId) {
                resultElement.textContent = 'Ú©Ø§Ø±Øª Ù…Ø¨Ø¯Ø£ Ùˆ Ù…Ù‚ØµØ¯ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ ÛŒÚ©Ø³Ø§Ù† Ø¨Ø§Ø´Ù†Ø¯!';
                resultElement.style.color = 'var(--danger)';
                return;
            }
            
            if (isNaN(amount) || amount <= 0) {
                resultElement.textContent = 'Ù…Ø¨Ù„Øº Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ø§ÛŒØ¯ Ø¹Ø¯Ø¯ÛŒ Ù…Ø«Ø¨Øª Ø¨Ø§Ø´Ø¯!';
                resultElement.style.color = 'var(--danger)';
                return;
            }
            
            const fromCard = cards.find(c => c.id === fromCardId && c.userId === currentUser.id);
            const toCard = cards.find(c => c.id === toCardId);
            
            if (!fromCard) {
                resultElement.textContent = 'Ú©Ø§Ø±Øª Ù…Ø¨Ø¯Ø£ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯!';
                resultElement.style.color = 'var(--danger)';
                return;
            }
            
            if (!toCard) {
                resultElement.textContent = 'Ú©Ø§Ø±Øª Ù…Ù‚ØµØ¯ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯!';
                resultElement.style.color = 'var(--danger)';
                return;
            }
            
            if (fromCard.balance < amount) {
                resultElement.textContent = 'Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯!';
                resultElement.style.color = 'var(--danger)';
                return;
            }
            
            // Ø§Ù†Ø¬Ø§Ù… Ø§Ù†ØªÙ‚Ø§Ù„
            fromCard.balance -= amount;
            toCard.balance += amount;
            
            // Ø°Ø®ÛŒØ±Ù‡ ØªØ±Ø§Ú©Ù†Ø´ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ - Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… Ø¯Ø± Ø¢ÛŒÙ†Ø¯Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ…)
            
            saveToStorage();
            loadDashboardData();
            
            resultElement.textContent = `Ø§Ù†ØªÙ‚Ø§Ù„ ${amount.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!`;
            resultElement.style.color = 'var(--success)';
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯Ù‡Ø§
            document.getElementById('transfer-amount').value = '';
            document.getElementById('transfer-desc').value = '';
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§
        function loadNotes() {
            if (!currentUser) return;
            
            const userNotes = notes.filter(n => n.userId === currentUser.id).sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            const container = document.getElementById('notes-container');
            container.innerHTML = '';
            
            if (userNotes.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--gray);">Ø´Ù…Ø§ Ù‡ÛŒÚ† ÛŒØ§Ø¯Ø¯Ø§Ø´ØªÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯.</div>';
                return;
            }
            
            userNotes.forEach(note => {
                const noteElement = document.createElement('div');
                noteElement.className = 'note-item';
                noteElement.innerHTML = `
                    <div class="delete-note" onclick="deleteNote(${note.id})">âŒ</div>
                    <p><strong>ØªØ§Ø±ÛŒØ®:</strong> ${new Date(note.createdAt).toLocaleString('fa-IR')}</p>
                    <p>${note.content}</p>
                `;
                container.appendChild(noteElement);
            });
        }

        // Ø§ÙØ²ÙˆØ¯Ù† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª
        function addNote() {
            if (!currentUser) return;
            
            const content = document.getElementById('new-note').value.trim();
            
            if (!content) {
                alert('Ù…Ø­ØªÙˆØ§ÛŒ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø®Ø§Ù„ÛŒ Ø¨Ø§Ø´Ø¯!');
                return;
            }
            
            const newNote = {
                id: Date.now(),
                userId: currentUser.id,
                content: content,
                createdAt: new Date().toISOString()
            };
            
            notes.push(newNote);
            saveToStorage();
            loadNotes();
            
            document.getElementById('new-note').value = '';
        }

        // Ø­Ø°Ù ÛŒØ§Ø¯Ø¯Ø§Ø´Øª
        function deleteNote(noteId) {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ')) {
                notes = notes.filter(n => n.id !== noteId);
                saveToStorage();
                loadNotes();
            }
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
        function loadUsersList() {
            const container = document.getElementById('users-container');
            container.innerHTML = '';
            
            users.forEach(user => {
                const userElement = document.createElement('div');
                userElement.className = 'user-item';
                userElement.innerHTML = `
                    <h4>${user.fullname} (${user.username})</h4>
                    <p><strong>Ù†Ù‚Ø´:</strong> ${user.role === 'admin' ? 'Ø§Ø¯Ù…ÛŒÙ†' : user.role === 'manager' ? 'Ù…Ø¯ÛŒØ±' : 'Ú©Ø§Ø±Ø¨Ø±'}</p>
                    <p><strong>ØªÙ„ÙÙ†:</strong> ${user.phone}</p>
                    <p><strong>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª:</strong> ${new Date(user.createdAt).toLocaleDateString('fa-IR')}</p>
                    <div style="margin-top: 10px;">
                        <button class="btn btn-sm btn-warning" onclick="changeUserRole(${user.id}, 'manager')">Ù…Ø¯ÛŒØ± Ú©Ù†</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteUser(${user.id})">Ø­Ø°Ù</button>
                    </div>
                `;
                container.appendChild(userElement);
            });
        }

        // ØªØºÛŒÛŒØ± Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø±
        function changeUserRole(userId, newRole) {
            const user = users.find(u => u.id === userId);
            if (user) {
                user.role = newRole;
                saveToStorage();
                loadUsersList();
                alert(`Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø± ${user.fullname} Ø¨Ù‡ ${newRole === 'manager' ? 'Ù…Ø¯ÛŒØ±' : 'Ø§Ø¯Ù…ÛŒÙ†'} ØªØºÛŒÛŒØ± Ú©Ø±Ø¯.`);
            }
        }

        // Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±
        function deleteUser(userId) {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ø­Ø°Ù Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯!')) {
                // Ø­Ø°Ù Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
                cards = cards.filter(c => c.userId !== userId);
                // Ø­Ø°Ù ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
                notes = notes.filter(n => n.userId !== userId);
                // Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±
                users = users.filter(u => u.id !== userId);
                saveToStorage();
                loadUsersList();
                alert('Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯.');
            }
        }

        // Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
        function searchUsers() {
            const searchTerm = document.getElementById('search-user').value.toLowerCase();
            const container = document.getElementById('users-container');
            container.innerHTML = '';
            
            const filteredUsers = users.filter(user => 
                user.username.toLowerCase().includes(searchTerm) || 
                user.fullname.toLowerCase().includes(searchTerm)
            );
            
            if (filteredUsers.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--gray);">Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.</div>';
                return;
            }
            
            filteredUsers.forEach(user => {
                const userElement = document.createElement('div');
                userElement.className = 'user-item';
                userElement.innerHTML = `
                    <h4>${user.fullname} (${user.username})</h4>
                    <p><strong>Ù†Ù‚Ø´:</strong> ${user.role === 'admin' ? 'Ø§Ø¯Ù…ÛŒÙ†' : user.role === 'manager' ? 'Ù…Ø¯ÛŒØ±' : 'Ú©Ø§Ø±Ø¨Ø±'}</p>
                    <p><strong>ØªÙ„ÙÙ†:</strong> ${user.phone}</p>
                `;
                container.appendChild(userElement);
            });
        }

        // Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø¯ÛŒØ± Ø¬Ø¯ÛŒØ¯
        function addManager() {
            const username = document.getElementById('manager-username').value.trim();
            const password = document.getElementById('manager-password').value.trim();
            const fullname = document.getElementById('manager-fullname').value.trim();
            
            if (!username || !password || !fullname) {
                alert('ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø§Ù„Ø²Ø§Ù…ÛŒ Ù‡Ø³ØªÙ†Ø¯!');
                return;
            }
            
            if (users.some(u => u.username === username)) {
                alert('Ø§ÛŒÙ† Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù‚Ø¨Ù„Ø§Ù‹ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯!');
                return;
            }
            
            const newManager = {
                id: Date.now(),
                username: username,
                password: password,
                fullname: fullname,
                phone: '09123456789', // Ø´Ù…Ø§Ø±Ù‡ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
                role: 'manager',
                createdAt: new Date().toISOString()
            };
            
            users.push(newManager);
            saveToStorage();
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±
            createDefaultCard(newManager.id);
            
            document.getElementById('manager-username').value = '';
            document.getElementById('manager-password').value = '';
            document.getElementById('manager-fullname').value = '';
            
            loadManagersList();
            alert('Ù…Ø¯ÛŒØ± Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.');
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„ÛŒØ³Øª Ù…Ø¯ÛŒØ±Ø§Ù†
        function loadManagersList() {
            const container = document.getElementById('managers-list');
            container.innerHTML = '<h3>Ù„ÛŒØ³Øª Ù…Ø¯ÛŒØ±Ø§Ù† ÙØ¹Ù„ÛŒ:</h3>';
            
            const managers = users.filter(u => u.role === 'manager' || u.role === 'admin');
            
            if (managers.length === 0) {
                container.innerHTML += '<p style="text-align: center; margin: 20px; color: var(--gray);">Ù‡ÛŒÚ† Ù…Ø¯ÛŒØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p>';
                return;
            }
            
            managers.forEach(manager => {
                const managerElement = document.createElement('div');
                managerElement.className = 'user-item';
                managerElement.style.margin = '10px 0';
                managerElement.innerHTML = `
                    <h4>${manager.fullname} (${manager.username})</h4>
                    <p><strong>Ù†Ù‚Ø´:</strong> ${manager.role === 'admin' ? 'Ø§Ø¯Ù…ÛŒÙ† Ø§ØµÙ„ÛŒ' : 'Ù…Ø¯ÛŒØ±'}</p>
                    <p><strong>ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯:</strong> ${new Date(manager.createdAt).toLocaleDateString('fa-IR')}</p>
                    ${manager.role !== 'admin' ? `<button class="btn btn-sm btn-danger" onclick="deleteUser(${manager.id})">Ø­Ø°Ù Ù…Ø¯ÛŒØ±</button>` : ''}
                `;
                container.appendChild(managerElement);
            });
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ†
        function loadAdminCards() {
            const select = document.getElementById('admin-card-select');
            select.innerHTML = '';
            
            cards.forEach(card => {
                const option = document.createElement('option');
                option.value = card.id;
                const user = users.find(u => u.id === card.userId);
                option.textContent = `${card.cardNumber} - ${user ? user.fullname : 'Ù†Ø§Ø´Ù†Ø§Ø³'} - ${card.balance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†`;
                select.appendChild(option);
            });
            
            if (cards.length > 0) {
                loadCardDetails();
            }
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ø±Øª Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
        function loadCardDetails() {
            const cardId = parseInt(document.getElementById('admin-card-select').value);
            const card = cards.find(c => c.id === cardId);
            
            if (!card) {
                document.getElementById('card-info').innerHTML = '<p>Ú©Ø§Ø±ØªÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>';
                return;
            }
            
            const user = users.find(u => u.id === card.userId);
            
            document.getElementById('card-info').innerHTML = `
                <p><strong>Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª:</strong> ${card.cardNumber}</p>
                <p><strong>Ù†Ø§Ù… ØµØ§Ø­Ø¨ Ú©Ø§Ø±Øª:</strong> ${user ? user.fullname : 'Ù†Ø§Ø´Ù†Ø§Ø³'}</p>
                <p><strong>Ù…ÙˆØ¬ÙˆØ¯ÛŒ ÙØ¹Ù„ÛŒ:</strong> ${card.balance.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                <p><strong>Ù†Ø§Ù… Ú©Ø§Ø±Øª:</strong> ${card.cardName}</p>
                <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> ${card.isActive ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ±ÙØ¹Ø§Ù„'}</p>
                <p><strong>ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯:</strong> ${new Date(card.createdAt).toLocaleDateString('fa-IR')}</p>
            `;
        }

        // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§Ø±Øª
        function updateBalance() {
            const cardId = parseInt(document.getElementById('admin-card-select').value);
            const balanceChange = parseInt(document.getElementById('balance-change').value);
            
            if (isNaN(balanceChange)) {
                alert('Ù…Ø¨Ù„Øº ØªØºÛŒÛŒØ± Ø¨Ø§ÛŒØ¯ ÛŒÚ© Ø¹Ø¯Ø¯ Ø¨Ø§Ø´Ø¯!');
                return;
            }
            
            const card = cards.find(c => c.id === cardId);
            
            if (!card) {
                alert('Ú©Ø§Ø±Øª Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯!');
                return;
            }
            
            const newBalance = card.balance + balanceChange;
            
            if (newBalance < 0) {
                alert('Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù…Ù†ÙÛŒ Ø´ÙˆØ¯!');
                return;
            }
            
            card.balance = newBalance;
            saveToStorage();
            
            loadCardDetails();
            document.getElementById('balance-change').value = '';
            alert(`Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§Ø±Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ${balanceChange > 0 ? 'Ø§ÙØ²Ø§ÛŒØ´' : 'Ú©Ø§Ù‡Ø´'} ÛŒØ§ÙØª.`);
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ù‚ÙˆÙ‚
        function loadSalaryUsers() {
            const select = document.getElementById('salary-user');
            select.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±...</option>';
            
            users.filter(u => u.role === 'user').forEach(user => {
                const option = document.createElement('option');
                option.value = user.id;
                option.textContent = `${user.fullname} (${user.username})`;
                select.appendChild(option);
            });
            
            loadSalariesList();
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„ÛŒØ³Øª Ø­Ù‚ÙˆÙ‚
        function loadSalariesList() {
            const container = document.getElementById('salaries-list');
            container.innerHTML = '<h3>Ø­Ù‚ÙˆÙ‚ ØªØ¹ÛŒÛŒÙ† Ø´Ø¯Ù‡:</h3>';
            
            let hasSalaries = false;
            
            users.filter(u => u.role === 'user').forEach(user => {
                const salaryInfo = salaries[user.id] || { monthly: 0, received: 0, lastReceived: null };
                
                if (salaryInfo.monthly > 0) {
                    hasSalaries = true;
                    const salaryElement = document.createElement('div');
                    salaryElement.className = 'user-item';
                    salaryElement.style.margin = '10px 0';
                    salaryElement.innerHTML = `
                        <h4>${user.fullname}</h4>
                        <p><strong>Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù‡Ø§Ù†Ù‡:</strong> ${salaryInfo.monthly.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                        <p><strong>Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯Ù‡:</strong> ${salaryInfo.received.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                        <p><strong>Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡:</strong> ${(salaryInfo.monthly - salaryInfo.received).toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</p>
                        ${salaryInfo.lastReceived ? `<p><strong>Ø¢Ø®Ø±ÛŒÙ† Ø¯Ø±ÛŒØ§ÙØª:</strong> ${new Date(salaryInfo.lastReceived).toLocaleDateString('fa-IR')}</p>` : ''}
                    `;
                    container.appendChild(salaryElement);
                }
            });
            
            if (!hasSalaries) {
                container.innerHTML += '<p style="text-align: center; margin: 20px; color: var(--gray);">Ù‡ÛŒÚ† Ø­Ù‚ÙˆÙ‚ÛŒ ØªØ¹ÛŒÛŒÙ† Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>';
            }
        }

        // ØªÙ†Ø¸ÛŒÙ… Ø­Ù‚ÙˆÙ‚ Ú©Ø§Ø±Ø¨Ø±
        function setUserSalary() {
            const userId = parseInt(document.getElementById('salary-user').value);
            const monthlySalary = parseInt(document.getElementById('monthly-salary-amount').value);
            
            if (isNaN(userId) || userId <= 0) {
                alert('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ú©Ø§Ø±Ø¨Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯!');
                return;
            }
            
            if (isNaN(monthlySalary) || monthlySalary <= 0) {
                alert('Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù‡Ø§Ù†Ù‡ Ø¨Ø§ÛŒØ¯ Ø¹Ø¯Ø¯ÛŒ Ù…Ø«Ø¨Øª Ø¨Ø§Ø´Ø¯!');
                return;
            }
            
            if (!salaries[userId]) {
                salaries[userId] = {
                    monthly: 0,
                    received: 0,
                    lastReceived: null
                };
            }
            
            salaries[userId].monthly = monthlySalary;
            saveToStorage();
            
            document.getElementById('monthly-salary-amount').value = '';
            loadSalariesList();
            alert('Ø­Ù‚ÙˆÙ‚ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØ¹ÛŒÛŒÙ† Ø´Ø¯.');
        }

        // Ø¯Ø±ÛŒØ§ÙØª Ø­Ù‚ÙˆÙ‚ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±
        function receiveSalary() {
            if (!currentUser || currentUser.role !== 'user') return;
            
            if (!salaries[currentUser.id] || salaries[currentUser.id].monthly === 0) {
                alert('Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø­Ù‚ÙˆÙ‚ÛŒ ØªØ¹ÛŒÛŒÙ† Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª!');
                return;
            }
            
            const salaryInfo = salaries[currentUser.id];
            const remaining = salaryInfo.monthly - salaryInfo.received;
            
            if (remaining <= 0) {
                alert('Ø´Ù…Ø§ ØªÙ…Ø§Ù… Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù‡ Ø¬Ø§Ø±ÛŒ Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯!');
                return;
            }
            
            if (!confirm(`Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ${remaining.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù† Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù‡ Ø¬Ø§Ø±ÛŒ Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯ØŸ`)) {
                return;
            }
            
            // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Øª Ø§ÙˆÙ„ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ø§ÛŒ ÙˆØ§Ø±ÛŒØ² Ø­Ù‚ÙˆÙ‚
            const userCards = cards.filter(c => c.userId === currentUser.id && c.isActive);
            if (userCards.length === 0) {
                alert('Ø´Ù…Ø§ Ú©Ø§Ø±Øª ÙØ¹Ø§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø­Ù‚ÙˆÙ‚ Ù†Ø¯Ø§Ø±ÛŒØ¯!');
                return;
            }
            
            const primaryCard = userCards[0];
            primaryCard.balance += remaining;
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ù‚ÙˆÙ‚
            salaryInfo.received = salaryInfo.monthly;
            salaryInfo.lastReceived = new Date().toISOString();
            
            saveToStorage();
            loadDashboardData();
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø­Ù‚ÙˆÙ‚ Ø¯Ø± ØµÙØ­Ù‡
            document.getElementById('monthly-salary').textContent = salaryInfo.monthly.toLocaleString('fa-IR');
            document.getElementById('received-salary').textContent = salaryInfo.received.toLocaleString('fa-IR');
            document.getElementById('remaining-salary').textContent = '0';
            
            alert(`Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù‡ Ø¬Ø§Ø±ÛŒ (${remaining.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†) Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ú©Ø§Ø±Øª Ø´Ù…Ø§ ÙˆØ§Ø±ÛŒØ² Ø´Ø¯.`);
        }

        // Ø¯Ø±ÛŒØ§ÙØª Ø­Ù‚ÙˆÙ‚ Ø¯Ø± ØµÙØ­Ù‡ Ø­Ù‚ÙˆÙ‚
        function loadSalaryPage() {
            if (!currentUser) return;
            
            const salaryInfo = salaries[currentUser.id] || { monthly: 0, received: 0, lastReceived: null };
            
            document.getElementById('monthly-salary').textContent = salaryInfo.monthly.toLocaleString('fa-IR');
            document.getElementById('received-salary').textContent = salaryInfo.received.toLocaleString('fa-IR');
            document.getElementById('remaining-salary').textContent = (salaryInfo.monthly - salaryInfo.received).toLocaleString('fa-IR');
        }

        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø³ÛŒØ³ØªÙ…
        function initSystem() {
            loadFromStorage();
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ø§Ø¯Ù…ÛŒÙ† Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
            if (users.length === 0) {
                const defaultAdmin = {
                    id: 1,
                    username: 'admin',
                    password: 'admin123',
                    fullname: 'Ø§Ø¯Ù…ÛŒÙ† Ø§ØµÙ„ÛŒ',
                    phone: '09123456789',
                    role: 'admin',
                    createdAt: new Date().toISOString()
                };
                
                users.push(defaultAdmin);
                saveToStorage();
                
                // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Øª Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ†
                createDefaultCard(defaultAdmin.id);
                
                // Ø­Ø°Ù Ø§ÛŒÙ† Ø®Ø· Ú©Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¯Ù…ÛŒÙ† Ø±Ø§ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ø§Ø¯
                // alert('Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ±ÙˆØ¯ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯:\nÙ†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ: admin\nØ±Ù…Ø² Ø¹Ø¨ÙˆØ±: admin123');
            }
        }

        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø³ÛŒØ³ØªÙ…
        window.onload = function() {
            initSystem();
            
            // Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ù‚Ø¨Ù„Ø§Ù‹ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ù†Ø§Ø³Ø¨ Ù‡Ø¯Ø§ÛŒØª Ø´ÙˆØ¯
            if (currentUser) {
                if (currentUser.role === 'admin' || currentUser.role === 'manager') {
                    showPage('admin-dashboard');
                } else {
                    showPage('user-dashboard');
                }
            }
        };
    </script>
</body>
</html>